# 関数の抽出

## 手順
1. 新たな関数を作り、その意図に沿って命名する(どうやるかではなく、何をするかによって名付ける)
   - 抽出したいコードがごく単純な場合でも、新しい関数名がコードの意図をより適切に表現するのなら抽出する
   - 抽出した関数を元の関数内に入れ子にすること
     - スコープ外の変数を大幅に減らせる、後からいつでも[関数の移動]()が行える
2. 抽出したいコードを、元の関数から新たな関数にコピーする
3. 抽出したコードを調べて、元の関数ではスコープ内だったが抽出後の関数ではスコープ外になった関数を特定する。それらをパラメータとして渡す
    - 抽出した関数を元の関数の入れ子として定義すると、こうした面倒な操作は必要ない
    - 大抵の場合そうした変数はローカル変数か、関数のパラメータ
    - 変数が抽出したコードの中だけで参照されていて、その宣言がコード外にあるときは、宣言を抽出したコード内に移すこと
    - 代入される変数が値渡しになっているかどうかに注意する、それが１つのみなら抽出したコードを問い合わせとして扱い、戻り値をその変数に代入することを試みる
    - 抽出したコード内で代入されるローカル変数が多すぎるなら、そのときは、抽出は一旦諦め下記を先に実施
      - [変数の分離]()
      - [問い合わせによる一時変数の置き換え]()
4. 全ての変数を処置したらコンパイラする
5. 元の関数に残った抽出前のコードを、抽出された関数への呼び出しに置き換える
6. テストする
7. 残りのコードを見て、抽出したコードと同じまたは類似したコードを佐賀市、[関数呼び出しによるインラインコードの置き換え]()を適用し、新しい関数を呼ぶ形にできないか検討する