# 参照から値の変更

## 手順
1. 候補のクラスが変更不可になっているか、あるいは変更不可にできるかどうかを確認する
2. 各setterに対して、[setterの削除](setterの削除.md)を行う
3. 値ベースの等価判定のメソッドを用意し、値オブジェクトのフィールドを使って判定を行う
   - ほとんどの言語環境では、この目的のためにオーバーライド可能な等価関数を提供している。通常ハッシュコードを生成するメソッドもオーバーライドする必要がある

```js
class Product{
	applyDiscount(arg) {this._price.amount -= arg;}
}
```
↓
```js
class Product{
	applyDiscount(arg){
		this._price = new Money(this._price.amount - arg, this._price.currency);
	}
}
```