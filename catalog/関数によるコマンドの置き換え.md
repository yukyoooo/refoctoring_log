# 関数によるコマンドの置き換え

## 手順
1. コマンドの生成とその実行メソッドの呼び出しに対して[関数の抽出](関数の抽出.md)を適用する
   - これにより、いずれこのコマンドを置き換えるための新しい関数が作成される
2. コマンドの実行sメソッドから呼び出されるメソッドに対して、それぞれ[関数のインライン化](関数のインライン化.md)をする
   - 呼び出されるメソッドが値を返す場合、まずその呼び出しに[変数の抽出](変数の抽出.md)をして、次に[関数のインライン化](関数のインライン化.md)をする
3. [関数宣言の変更](関数宣言の変更.md)をして、コンストラクタの全てのパラメータをコマンドの実行メソッドのパラメータに加える
4. フィールドごとに、コマンドの実行メソッド内での参照の代わりにパラメータを使うように変更する。変更するたびにテストする
5. コンストラクタの呼び出しとコマンドの実行メソッドの呼び出しを、呼び出し元にインライン化する
6. テストする
7. [デッドコードの削除](デッドコードの削除.md)をコマンドクラスに適用する

```js
class ChargeCalculator {
	constructor (customer, usage){
		this._customer = customer;
		this._usage = usage;
    }
	execute(){
		return this._customer.rate * this._usage;
    }
}
```
↓
```js
function charge(customer, usage){
	return customer.rate * usage;
}
```