# ポリモーフィズムによる条件記述の置き換え

## 手順
1. ポリモーフィックな振る舞いを持たせるクラスが存在しない場合は、そのクラスと一緒に適切なインスタンスを返すファクトリ関数を作成する
2. 呼び出し側のコードで、ファクトリ関数を使うようにする
3. 条件ロジックを持つ関数をスーパークラスに移動する
   - 条件ロジックが自己完結型の独立した関数になっていない場合は、[関数の抽出](関数の抽出.md)によって関数にする
4. サブクラスの一つを選んで、条件別のメソッドをオーバーライドするメソッドを作成する。条件文の該当する節の内容をサブクラスのメソッドにコピーし、適合するように調整する
5. 条件ロジックの各節に対してこれを繰り返す
6. スーパークラスのメソッドにはデフォルトケースを残す。スーパークラスを抽象クラスにすべき場合は、メソッドの処理がサブクラスの責務であることを示すために、そのメソッドを抽出メソッドとして宣言するか、メソッド内でエラーを投げる

```js
switch (bird.type) {
	case 'EuropeanSwallow':
		return "average";
	case 'AfricanSwallow':
		return (bird.numberOfCoconuts > 2) ? "tired" : "average";
	case 'NorwegianBlueParrot':
		return (bird.voltage > 100) ? "scorched" : "beautiful";
	default:
		return "unknown";
}
```
↓
```js
class EuropeanSwallow {
	get plumage() {
		return "average";
	}
}
class AfricanSwallow {
	get plumage() {
		return (this.numberOfCoconuts > 2) ? "tired" : "average";
	}
}
class NorwegianBlueParrot {
	get plumage() {
		return (this.voltage > 100) ? "scorched" : "beautiful";
	}
}
```