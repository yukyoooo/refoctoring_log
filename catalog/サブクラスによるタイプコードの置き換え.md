# サブクラスによるタイプコードの置き換え

## 手順
1. タイプコード用フィールドを自己カプセル化する
2. タイプコード値を一つ選択し、そのタイプコード用のサブクラスを作成する。そのタイプコードのgetterを上書きして、リテラルのタイプコード値を返すようにする
3. タイプコードのパラメータから新しいサブクラスに変換するための選択ロジックを作成する
   - 直接継承する方法では、[ファクトリ関数によるコンストラクタの置き換え](ファクトリ関数によるコンストラクタの置き換え.md)を適用して、そのファクトリに選択ロジックをおく
   - 間接的に継承を使う方法では、選択ロジックはコンストラクタに残しても良い
4. テストする
5. タイプコードの値ごとにサブクラスの作成と選択ロジックの追加を繰り返す。変更のたびにテストする
6. タイプコード用フィールドを削除する
7. テストする
8. タイプコードのアクセサを使用する全てのメソッドに対して[メソッドの押し下げ](メソッドの押し下げ.md)および[ポリモーフィズムによる条件記述の置き換え](ポリモーフィズムによる条件記述の置き換え.md)を適用する。全てを置き換えたら、タイプコードのアクセサを削除できる

```js
function createEmployee(name, type) {
	return new Employee(name, type);
}
```
↓
```js
function createEmployee(name, type) {
	switch (type) {
		case "engineer": return new Engineer(name);
		case "salesman": return new Salesman(name);
		case "manager": return new Manager(name);
    }
}
```