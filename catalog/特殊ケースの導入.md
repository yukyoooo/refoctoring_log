# 特殊ケースの導入

## 手順
1. 特殊ケースを判定するプロパティをオブジェクトに追加して、falseを返すようにする
2. 特殊ケースを判定するプロパティだけを持つ特殊ケース用クラスを作成して、trueを返すようにする
3. 特殊ケースと比較するコードに対して[関数の抽出](関数の抽出.md)を行う。全てのクライアントコードで直接比較するのをやめて、この新しい関数を使うようにする
4. 新しく作成した特殊ケース用クラスをコードに導入する。特殊ケース用オブジェクトは関数呼び出しから返すか、変換関数でオブジェクトに組み込む
5. 特殊ケースと比較する関数の本体を変更して、特殊ケースの判定用プロパティを使うようにする
6. テストする
7. [関数群のクラスの集約](関数群のクラスへの集約.md)または[関数群の変換への集約](関数群の変数への集約.md)を行なって、共通な特殊ケースの処理を特殊ケース用クラスにすべて移動させる
   - 特殊ケース用クラスは通常、単純な問い合わせに対して固定値を返すだけなので、オブジェクトリテラルで対応できる場合もある
8. 依然として特殊ケースの判定が必要な場所については、特殊ケース比較関数の呼び出しロジックに対して[関数のインライン化](関数のインライン化.md)を行う

```js
if (aCustomer === "unknown") customerName = "occupant";
```
↓
```js
class UnknownCustomer {
	get name() {return "occupant";}
}
```