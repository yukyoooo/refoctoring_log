# 関数の移動

## 手順
1. 移動対象の関数が現在のコンテキストで使用しているプログラム要素をすべて見つける。それらも移動すべきかどうかを検討する
   - 呼び出している関数にも移動すべきものがあった場合、通常、まずはその関数から移動する。こうすることで、一連の関数の移動を依存性の低い関数から開始できる
   - 上位レベルの関数がサブ関数群の唯一の呼び出し元だった場合、それらのサブ関数群を上位の関数にインライン化し、移動した後で再抽出してもよい
2. 選択した関数がポリモーフィックなメソッドかどうかを確認する
   - オブジェクト指向言語の場合、スーパークラスとサブクラスに注意する必要がある
3. 関数を移動先のコンテキストにコピーする。新居となる移動先に関数が適合するように調整する
   - コード本体が元のコンテキスト内の要素を使用する場合、それらの要素をパラメータとして渡すか、あるいは元のコンテキストへの参照を渡す必要がある
   - 関数を移動すると、新しいコンテキストにうまく適合する別の名前を付けたくなることがよくある
4. 静的解析を実行する
5. 元とのコンテキストから移動後の関数を参照できるようにする
6. 元の関数を委譲関数に変更する
7. テストする
8. 元の関数に対して[関数のインライン化](関数のインライン化.md)の適用を検討する
   - 元の関数は委譲関数として残しても良い。しかし、移動した関数を呼び出し元が簡単に呼び出せるなら、余分な仲介者は取り除くほうが良い

```js
class Account {
	get overdraftCharge() {...}
}
```
↓
```js
class AccountType {
	get overdraftCharge() {...}
}
```