# 問い合わせによる一時変数の置き換え

## 手順
1. 一時変数の値は、それが使われる前に確定していることを確認する。また、それを計算するコードはいつ使っても常に同じ結果になることを確認する
2. 一時変数が読み取り専用でないときは、可能であれば読み取り専用にする
3. テストする
4. 一時変数への代入を関数として抽出する
   - 一時変数と関数に同じ名前をつけられない場合は、一時的な名前を関数につける
   - 抽出された関数に副作用がないことを確かめる。もし副作用がある場合、[問い合わせと更新の分離](問い合わせと更新の分離.md)を施す
5. テストする
6. [変数のインライン化](変数のインライン化.md)を施して、一時変数を取り除く

```js
const basePrice = this._quantity * this._itemPrice;
if(basePrice > 1000)
	return basePrice * 0.95;
else
	return basePrice * 0.98;
```
↓
```js
get basePrice() {this._quantity * this._itemPrice;}
...
if(this.basePrice > 1000)
	return this.basePrice * 0.95;
else
	return this.basePrice * 0.98;
```