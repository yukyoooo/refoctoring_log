# レコードのカプセル化

## 手順
1. レコードを保存する変数に[変数のカプセル化](変数のカプセル化.md)を施す
2. 変数の中身を、レコードをラップする簡単なクラスに置き換える。レコードをそのまま返すアクセサをそのクラスに定義する。変数をカプセル化する関数を変更して、アクセサを使うようにする
3. テストする
4. レコードそのものではなくオブジェクトを返す関数を用意する
5. レコードの使用箇所ごとに、レコードを返す関数の呼び出しを、オブジェクトを返す関数の呼び出しに置き換える。フィールドデータの取得にはオブジェクトのアクセサを使うようにする。必要ならばそのためのアクセサを作る。変更のたびにテストする。
   - 入れ子構造を持つなど、レコードが複雑な場合は、まずデータを更新しているクライアントのコードに注目する
   - データを読むだけのクライアントについては、コピーや読み取り専用のプロキシを返すことを検討する
6. 生データへのアクセサと、検索しやすくしておいたレコードそのままを返す関数をクラスから取り除く
7. テストする
8. レコードのフィールド自体が構造体である場合、[レコードのカプセル化](レコードのカプセル化.md)と[コレクションのカプセル化](コレクションのカプセル化.md)を再起的に施すことを検討する

```js
organization = {name: "Acme Gooseberries", country: "GB"};
```
　↓
```js
class Organization {
	constructor(data){
		this._name = data.name;
		this._country = data.country;
	}
	get name() {return this._name;}
	set name(arg) {this._name = arg;}
	get country() {return this._country;}
	set country(arg) {this._country = arg;}
}
```