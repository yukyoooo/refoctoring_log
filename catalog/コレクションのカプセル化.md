# コレクションのカプセル化

## 手順
1. コレクションの参照がまだカプセル化されていないなら[変数のカプセル化](変数のカプセル化.md)を施す
2. 要素を追加・削除するための関数をコレクションに追加する
   - コレクションのsetterがある場合、可能ならば[setterの削除](setterの削除.md)を施す。それが不可能ならコレクションのコピーを返すようにする
3. 静的チェックを実行する
4. すべてのコレクションの参照を探す。コレクションの変更メソッドを読んでいる場合は、新たな追加・削除のメソッドを使うようにすべて書き換える。変更のたびにテストする
5. コレクションのgetterを変更して、保護されたビュー(読み取り専用プロキシまたはコピー)を返すようにする
6. テストする

```js
class Person {
	get courses() {return this._courses;}
	set courses(aList) {this._courses = aList;}
}
```
↓
```js
class Person {
	get courses() {return this._courses.slice();}
	addCourse(aCourse) {...}
	removeCourse(aCourse) {...}
}
```